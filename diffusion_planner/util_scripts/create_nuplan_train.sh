#!/bin/bash
set -eu

# This script convert the dataset to a list.
# 2021.06.07.11.59.52_veh-35_00008_00083.db
# 2021.06.07.11.59.52_veh-35_00095_00555.db
# 2021.06.07.11.59.52_veh-35_00566_00754.db
# 2021.06.07.11.59.52_veh-35_00765_01072.db
# 2021.06.07.11.59.52_veh-35_01102_01213.db
# 2021.06.07.11.59.52_veh-35_01224_01328.db
# 2021.06.07.11.59.52_veh-35_01412_01652.db
# 2021.06.07.11.59.52_veh-35_01710_01858.db
# 2021.06.07.11.59.52_veh-35_01884_01991.db
# 2021.06.07.11.59.52_veh-35_02002_02116.db
# ->
# [
#     "2021.06.07.11.59.52_veh-35_00008_00083",
#     "2021.06.07.11.59.52_veh-35_00095_00555",
#     "2021.06.07.11.59.52_veh-35_00566_00754",
#     "2021.06.07.11.59.52_veh-35_00765_01072",
#     "2021.06.07.11.59.52_veh-35_01102_01213",
#     "2021.06.07.11.59.52_veh-35_01224_01328",
#     "2021.06.07.11.59.52_veh-35_01412_01652",
#     "2021.06.07.11.59.52_veh-35_01710_01858",
#     "2021.06.07.11.59.52_veh-35_01884_01991",
#     "2021.06.07.11.59.52_veh-35_02002_02116"
# ]

target_dir=$1
output_file="./nuplan_train.json"

body=$(ls $target_dir | sed 's/.db//g' | sed 's/^/    "/g' | sed 's/$/"/g' | sed 's/$/,/g' | sed '$ s/.$//')

echo "[" > $output_file
echo "$body" >> $output_file
echo "]" >> $output_file
